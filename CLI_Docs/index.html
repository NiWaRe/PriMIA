



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.13">
    
    
      
        <title>Library Documentation - PriMIA</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.077507d7.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.ff0a5ce4.min.css">
      
      
        
        
        <meta name="theme-color" content="#546d78">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,400i,700%7CFira+Code&display=fallback">
        <style>body,input{font-family:"Work Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Fira Code",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#library-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="PriMIA" class="md-header-nav__button md-logo" aria-label="PriMIA">
      
  <img src="../images/OM - PriMIA-Icon@5x.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            PriMIA
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Library Documentation
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PriMIA" class="md-nav__button md-logo" aria-label="PriMIA">
      
  <img src="../images/OM - PriMIA-Icon@5x.png" alt="logo">

    </a>
    PriMIA
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Start Here" class="md-nav__link">
      Start Here
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Library Documentation
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" title="Library Documentation" class="md-nav__link md-nav__link--active">
      Library Documentation
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#video-walkthrough" class="md-nav__link">
    Video walkthrough
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation-for-the-individual-components" class="md-nav__link">
    Documentation for the individual components
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../HowTo/" title="How-To Guides" class="md-nav__link">
      How-To Guides
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ConfigDocs/" title="Configuration File Documentation" class="md-nav__link">
      Configuration File Documentation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../HowToMod/" title="Contributing to or modifying PriMIA" class="md-nav__link">
      Contributing to or modifying PriMIA
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Dataset_Description/" title="Dataset Description" class="md-nav__link">
      Dataset Description
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#video-walkthrough" class="md-nav__link">
    Video walkthrough
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation-for-the-individual-components" class="md-nav__link">
    Documentation for the individual components
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="library-documentation">Library Documentation</h1>
<h2 id="video-walkthrough">Video walkthrough</h2>
<h2 id="documentation-for-the-individual-components">Documentation for the individual components</h2>
<p>This section describes what the individual components of PriMIA do.</p>
<ul>
<li>
<p><code>configs</code>
This folder contains the configuration files. <code>torch</code> contains the <code>config.ini</code> files which are used for configuring the training process. <code>websetting</code> contains files for usage with WebSocket/HTTP training over the network. Documentation for these files can be found <a href="../ConfigDocs/">here</a></p>
</li>
<li>
<p><code>data</code>
This folder contains the <a href="../Dataset_Description/">dataset</a> used in our publication and case study. After running <code>make &lt;symbolic/minimal&gt;_server folders</code>, a <code>server_simulation</code> folder appears here which holds the data for the VirtualWorker nodes. The <code>train</code> and <code>test</code> folders hold the original dataset. The two <code>.csv</code> files contain metadata and labels.</p>
</li>
<li>
<p><code>docs</code>
This folder contains the documentation source and is not needed by the end user.</p>
</li>
<li>
<p><code>figure_scripts</code>
This folder contains scripts for re-creating the figures for our publication. It is not needed by the end user.</p>
</li>
<li>
<p><code>model_weights</code>
This folder does not always exist. It will be generated after a training run and stores model weights and a <code>.csv</code> file with the training metrics.</p>
</li>
<li>
<p><code>Node</code>
This folder contains the code for setting up a PyGrid node. Documentation for how to use this can be found <a href="../HowTo/">here</a></p>
</li>
<li>
<p><code>site</code>
This folder contains the HTML and CSS for the documentation. It should not be changed by the end user</p>
</li>
<li>
<p><code>syft</code>
This folder contains the PySyft source code. It should not be altered unless you really know what you are doing.</p>
</li>
<li>
<p><code>torchlib</code>
This folder contains all the utility modules (the <em>engine room</em>) for PriMIA. </p>
<ul>
<li><code>dataloader.py</code> contains the <code>CombinedLoader</code> class which is the main dataloader for PriMIA and loads image and medical image files. It also contains various utility functions required for PriMIA's operation and ways to load both the supplied paediatric pneumonia dataset and the MNIST dataset which can be used for experimentation.</li>
<li><code>dicomtools.py</code> contains the logic for loading DICOM files. Documentation for the module can be found in the module's source.</li>
<li><code>find_config.py</code> contains the logic to run hyperparameter optimisation with Optuna. Its documentation can be found <a href="../HowTo/">here</a></li>
<li><code>models.py</code> contains the models available in PriMIA, a simple CNN (called <code>simpleconv</code>), a VGG-style CNN and the ResNet18 used in our publication</li>
<li><code>run_websocket_server.py</code> is a utility script to quickly run a set of WebSocket/HTTP servers to train models. It is not required for operation since servers can be run directly from the <code>Node</code> module.</li>
<li><code>utils.py</code> contains the entire logic for federated learning. If you are interested in the internals of PriMIA, this is where to look.</li>
</ul>
</li>
<li>
<p><code>DATASET_LICENSE</code>
This is the license for the dataset used, which is different from the source code license. Please read the license and use PriMIA and the data <em>only</em> in accordance to its terms.</p>
</li>
<li>
<p><code>doc_requirements.txt</code>
This is the requirements file to build the documentation. It is normally not needed by the end user.</p>
</li>
<li>
<p><code>environment_torch.yml</code>
This is the preferred way to install dependencies. See <a href="../HowTo/">here</a> for more information on setting up dependencies and an environment to run PriMIA.</p>
</li>
<li>
<p><code>inference.py</code>
This is the entrypoint to perform (encrypted inference) with PriMIA and implements the core logic. If you are interested in the internals of encrypted inference, this is the file you are looking for.</p>
</li>
<li>
<p><code>LICENSE</code>
This is the license for the source code, which is different from the dataset license. Please read the license and use PriMIA and the data <em>only</em> in accordance to its terms.</p>
</li>
<li>
<p><code>Makefile</code>
This file contains a large amount of pre-made <em>recipes</em> which can <code>make</code> (pun intended) your life much easier. See <a href="../HowTo/">here</a> for how to use these recipes.</p>
</li>
<li>
<p><code>mkdocs.yml</code>
This is a configuration file for the documentation. It is normally not needed by the end user</p>
</li>
<li>
<p><code>README.md</code>
This contains the GitHub readme. It is not needed by the end user.</p>
</li>
<li>
<p><code>requirements.txt</code>
This is the other (and not preferred) way to install dependencies. See <a href="../HowTo/">here</a> for more information on setting up dependencies and an environment to run PriMIA.</p>
</li>
<li>
<p><code>test.py</code>
This is the entrypoint to test a trained algorithm on data which is already set up in named folders identical to the ones in our dataset. It is a convenience script to obtain model metrics and does not represent the main use-case for PriMIA. </p>
</li>
<li>
<p><code>train.py</code>
This is the entrypoint to federated or local model training and contains all the logic of the training loop. If you are interested in how training in PriMIA is carried out, this is the script to look at.</p>
</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href=".." title="Start Here" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Start Here
              </div>
            </div>
          </a>
        
        
          <a href="../HowTo/" title="How-To Guides" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                How-To Guides
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.2d1db4bd.min.js"></script>
      <script src="../assets/javascripts/bundle.6627ddf3.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>