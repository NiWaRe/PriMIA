



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.13">
    
    
      
        <title>Configuration File Documentation - PriMIA</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.077507d7.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.ff0a5ce4.min.css">
      
      
        
        
        <meta name="theme-color" content="#546d78">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,400i,700%7CFira+Code&display=fallback">
        <style>body,input{font-family:"Work Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Fira Code",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration-file-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="PriMIA" class="md-header-nav__button md-logo" aria-label="PriMIA">
      
  <img src="../images/icon.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            PriMIA
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Configuration File Documentation
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PriMIA" class="md-nav__button md-logo" aria-label="PriMIA">
      
  <img src="../images/icon.png" alt="logo">

    </a>
    PriMIA
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Start Here" class="md-nav__link">
      Start Here
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CLI_Docs/" title="Library Documentation" class="md-nav__link">
      Library Documentation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../HowTo/" title="How-To Guides" class="md-nav__link">
      How-To Guides
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Configuration File Documentation
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" title="Configuration File Documentation" class="md-nav__link md-nav__link--active">
      Configuration File Documentation
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#torch-subdirectory" class="md-nav__link">
    torch subdirectory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#websetting-subdirectory" class="md-nav__link">
    websetting subdirectory
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../HowToMod/" title="Contributing to or modifying PriMIA" class="md-nav__link">
      Contributing to or modifying PriMIA
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Dataset_Description/" title="Dataset Description" class="md-nav__link">
      Dataset Description
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#torch-subdirectory" class="md-nav__link">
    torch subdirectory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#websetting-subdirectory" class="md-nav__link">
    websetting subdirectory
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="configuration-file-documentation">Configuration File Documentation</h1>
<p>This file contains the documentation for the configuration files, which can be found inside the <code>configs</code> directory. 
The directory has two subdirectories, <code>torch</code>, which contains the training-related configuration files and <code>websetting</code> which contains WebSocket/HTTP related configuration files. </p>
<h2 id="torch-subdirectory"><code>torch</code> subdirectory</h2>
<p>The training-related configuration files can be found or placed here. A series of pre-made configuration files with self-explanatory names are available. We suggest adapting <code>pneumonia-resnet-pretrained.ini</code> to your purpose. This file will be required by PriMIA whenever a <code>--config</code> flag is required in the CLI. The structure of the file can be found below. Documentation for non self-explanatory items is included as a comment. </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="n">config</span><span class="p">]</span>
<span class="n">batch_size</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">train_resolution</span> <span class="o">=</span> <span class="mi">224</span>
<span class="n">inference_resolution</span> <span class="o">=</span> <span class="mi">512</span>
<span class="n">test_batch_size</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">test_interval</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># How often to test the model during training. </span>
                  <span class="c1"># 1 means &quot;every epoch&quot;</span>
<span class="n">validation_split</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1"># in %</span>
<span class="n">epochs</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># How many epochs. If left empty defaults to 40</span>
<span class="n">lr</span> <span class="o">=</span> <span class="mf">1e-4</span> <span class="c1"># Initial learning rate</span>
<span class="n">end_lr</span> <span class="o">=</span> <span class="mf">1e-5</span> <span class="c1"># Final learning rate after decay</span>
<span class="n">restarts</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Warm restarting of the learning rate. 0 means no restarts</span>
<span class="n">beta1</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c1"># Adam optimiser parameter</span>
<span class="n">beta2</span> <span class="o">=</span> <span class="mf">0.99</span> <span class="c1"># Adam optimiser parameter</span>
<span class="n">weight_decay</span> <span class="o">=</span> <span class="mf">5e-4</span> <span class="c1"># =L2 regularisation</span>
<span class="p">;</span><span class="n">momentum</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c1"># SGD momentum term</span>
<span class="n">deterministic</span> <span class="o">=</span> <span class="n">yes</span> <span class="c1"># use random seed and torch deterministic options</span>
                    <span class="c1"># WARNING: this is incompatible with certain </span>
                    <span class="c1"># settings and will give an appropriate warning</span>
<span class="n">seed</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># random seed</span>
<span class="n">log_interval</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1"># used in conjunction with visdom. </span>
                  <span class="c1"># How often to log results to the visdom server</span>
<span class="n">optimizer</span> <span class="o">=</span> <span class="n">Adam</span> <span class="c1"># &quot;SGD&quot; or &quot;Adam&quot;</span>
<span class="n">differentially_private</span> <span class="o">=</span> <span class="n">no</span> <span class="c1"># use differential privacy. This feature is </span>
                            <span class="c1"># experimental and not supported on complex</span>
                            <span class="c1"># network architectures</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">resnet</span><span class="o">-</span><span class="mi">18</span> <span class="c1"># &quot;simpleconv&quot;, &quot;vgg16&quot; or &quot;resnet-18&quot;</span>
<span class="n">pretrained</span> <span class="o">=</span> <span class="n">yes</span> <span class="c1"># Use ImageNet weights</span>
<span class="n">weight_classes</span> <span class="o">=</span> <span class="n">yes</span> <span class="c1"># Use class-weighted gradient descent</span>
<span class="n">pooling_type</span> <span class="o">=</span> <span class="nb">max</span> <span class="c1"># &quot;max&quot; or &quot;avg&quot;</span>

<span class="p">[</span><span class="n">augmentation</span><span class="p">]</span>
<span class="n">rotation</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">translate</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">scale</span> <span class="o">=</span> <span class="mf">0.15</span>
<span class="n">shear</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">mixup</span> <span class="o">=</span> <span class="n">yes</span> <span class="c1"># use MixUp augmentation</span>
<span class="n">mixup_lambda</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c1"># mixing parameter. Leaving it empty results </span>
                   <span class="c1"># in stochastic MixUp where the parameter</span>
                   <span class="c1"># gets sampled from a random uniform </span>
                   <span class="c1"># distribution at every application</span>
<span class="n">mixup_prob</span> <span class="o">=</span> <span class="mf">0.9</span> <span class="c1"># MixUp probability</span>

<span class="p">[</span><span class="n">albumentations</span><span class="p">]</span> <span class="c1"># Settings passed to albumentations</span>
<span class="n">clahe</span> <span class="o">=</span> <span class="n">yes</span> <span class="c1"># contrast-limited adaptive histogram equalisation</span>
<span class="n">overall_prob</span> <span class="o">=</span> <span class="mf">0.75</span> <span class="c1"># overall probability of applying albumentations</span>
<span class="n">individual_probs</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c1"># probabilities of the individual augmentations</span>
<span class="n">noise_std</span> <span class="o">=</span> <span class="mf">0.05</span> <span class="c1"># standard deviation of the Gaussian noise</span>
<span class="n">noise_prob</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c1"># probability of adding noise</span>
<span class="n">randomgamma</span> <span class="o">=</span> <span class="n">yes</span>
<span class="n">randombrightness</span> <span class="o">=</span> <span class="n">yes</span>
<span class="n">blur</span> <span class="o">=</span> <span class="n">yes</span>
<span class="n">elastic</span> <span class="o">=</span> <span class="n">yes</span>
<span class="n">optical_distortion</span> <span class="o">=</span> <span class="n">yes</span>
<span class="n">grid_distortion</span> <span class="o">=</span> <span class="n">yes</span>
<span class="n">grid_shuffle</span> <span class="o">=</span> <span class="n">no</span>
<span class="n">hsv</span> <span class="o">=</span> <span class="n">no</span> <span class="c1"># HSV space augmentations</span>
<span class="n">invert</span> <span class="o">=</span> <span class="n">no</span>
<span class="n">cutout</span> <span class="o">=</span> <span class="n">no</span>
<span class="n">shadow</span> <span class="o">=</span> <span class="n">no</span>
<span class="n">fog</span> <span class="o">=</span> <span class="n">yes</span>
<span class="n">sun_flare</span> <span class="o">=</span> <span class="n">no</span>
<span class="n">solarize</span> <span class="o">=</span> <span class="n">no</span>
<span class="n">equalize</span> <span class="o">=</span> <span class="n">no</span>
<span class="n">grid_dropout</span> <span class="o">=</span> <span class="n">no</span>

<span class="p">[</span><span class="n">federated</span><span class="p">]</span>
<span class="n">sync_every_n_batch</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># Synchronisation parameter. </span>
                       <span class="c1"># High values make training take longer</span>
                       <span class="c1"># but usually result in better performance</span>
<span class="n">wait_interval</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="c1"># not implemented</span>
<span class="n">keep_optim_dict</span> <span class="o">=</span> <span class="n">no</span> <span class="c1"># not implemented</span>
<span class="n">repetitions_dataset</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># how many times to augment/repeat the </span>
                        <span class="c1"># dataset on the nodes. </span>
                        <span class="c1"># Will adapt based on number of epochs</span>
<span class="n">weighted_averaging</span> <span class="o">=</span> <span class="n">yes</span> <span class="c1"># class-weighted federated averaging</span>

<span class="p">[</span><span class="n">system</span><span class="p">]</span>
<span class="n">num_threads</span> <span class="o">=</span> <span class="mi">16</span> <span class="c1"># passed to PyTorch</span>
</code></pre></div>
</td></tr></table>

<h2 id="websetting-subdirectory"><code>websetting</code> subdirectory</h2>
<p>This contains two files, <code>config.csv</code> which should <em>not</em> be renamed but can be changed and <code>config_inference.csv</code> which can be renamed and is required whenever PriMIA asks for a <code>--websockets_config</code> file.</p>
<p><code>config.csv</code> is used by the utility script <code>run_websocket_server.py</code> in the <code>torchlib</code> directory. It is not required for normal operation of the library but rather exists as a convenience to quickly set up WebSocket/HTTP-based workers on the local system. It can be altered to change the IP addresses and ports the workers will use from their defaults. The names of the workers can also be altered, but we <em>strongly</em> discourage this unless you understand the consequences, as the names are used for the MNIST training example.</p>
<p><code>config_inference.csv</code> is used for remote inference. The IP addresses of the model owner, the data owner and the crypto provider as well as the ports can be set here. Please note that this is only for establishing a connection to nodes which are already running. If you want to set up nodes, this can be achieved by running the <code>Node</code> module with the documentation found <a href="../HowTo/">here</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../HowTo/" title="How-To Guides" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                How-To Guides
              </div>
            </div>
          </a>
        
        
          <a href="../HowToMod/" title="Contributing to or modifying PriMIA" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Contributing to or modifying PriMIA
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.2d1db4bd.min.js"></script>
      <script src="../assets/javascripts/bundle.6627ddf3.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>